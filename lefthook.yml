pre-commit:
  parallel: false
  commands:
    # 最優先: ステージされたファイルのみフォーマット
    prettier:
      priority: 1
      glob: '*.{js,ts,cjs,mjs,d.cts,d.mts,jsx,tsx,json,jsonc}'
      run: npx prettier --write {staged_files}
      stage_fixed: true

    # チェック系（エラーでもコミットを妨げない）
    eslint:
      priority: 2
      glob: '*.{js,ts,cjs,mjs,d.cts,d.mts,jsx,tsx,json,jsonc}'
      run: pnpm run lint

    tsc:
      priority: 2
      glob: '*.{js,ts,tsx}'
      run: pnpm run tsc

    spell-check-student:
      priority: 2
      glob: 'apps/student/**/*.{js,ts,cjs,mjs,d.cts,d.mts,jsx,tsx,json,jsonc}'
      run: cd apps/student && pnpm cspell "src/**/*.{ts,tsx,md,json}"

    spell-check-teacher:
      priority: 2
      glob: 'apps/teacher/**/*.{js,ts,cjs,mjs,d.cts,d.mts,jsx,tsx,json,jsonc}'
      run: cd apps/teacher && pnpm cspell "src/**/*.{ts,tsx,md,json}"
